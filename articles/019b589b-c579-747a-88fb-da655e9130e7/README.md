## ライブラリを使わない

個人で作るものであったり、人に見せるものでも比較的単純な要件の場合、あえてライブラリを使わない選択肢を取ることがあります。私個人の見解としては、特にコマンド引数解析やコンソール出力の色付け、簡易バリデーション、単体テストについてこの傾向が顕著です。

既存のライブラリを使うことは、実装コストの削減と引き換えに、将来にわたる追従コスト（更新、破壊的変更、非互換、メンテナンス停止）を引き受けることを意味します。要件が単純な場合、この追従コストが実装コストを上回りやすく、結果として総コストが増える傾向があります。一方で処理系に組み込まれたもので実装する場合、機能的に貧弱であることが多い一方、その挙動は処理系自体の寿命と運命を共にするので追従コストは安定します。

標準ライブラリが充実するほど、自前実装のコストは下がることになります。処理系の機能が充実してきていることも判断の背景にあります。Node.jsでもPythonでも、ここに挙げた程度の機能は標準ライブラリで提供されています。

コマンド引数解析やコンソール出力の色付けは、一つのアプリケーションの中で必要な機能が限られており、実装コード量も予測しやすい範疇です。フル機能のCLIアプリフレームワークはオーバースペックになりがちです。バリデーションは程度の問題で、使わない構造は単に無視してほしいプロパティが正しい型で生えているか程度なら手で書くけれど、不要なプロパティは禁止したいあたりを境界にしてライブラリを使うかな。

逆に必ずライブラリを使うものもあります。基盤データ構造・アルゴリズムや最適化が絡む処理・正しさや性能の検証が困難なものは、自分で書くことはほぼありません。これらは自前再実装のリスクがメリットを常に上回る体感があります。
